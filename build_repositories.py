
import os # Load the list of repositories from a file with open("repositories.txt", "r") as f: REPOSITORIES = [line.strip() for line in f.readlines()] REPO_DIR = "repos" def clone_repository(repo_url): os.system(f"git clone {repo_url} {REPO_DIR}") def build_repository(repo_dir): os.chdir(repo_dir) os.system("python setup.py build") os.chdir("..") def test_repository(repo_dir): os.chdir(repo_dir) os.system("python -m unittest discover") os.chdir("..") def bundle_repositories(): for repo_dir in os.listdir(REPO_DIR): os.chdir(os.path.join(REPO_DIR, repo_dir)) os.system(f"tar -czvf {repo_dir}-bundle-2022-12-31.tar.gz .") os.chdir("..") def main(): # Clone repositories os.makedirs(REPO_DIR, exist_ok=True) for repo_url in REPOSITORIES: try: clone_repository(repo_url) build_repository(os.path.join(REPO_DIR, repo_url.split("/")[-1][:-4])) test_repository(os.path.join(REPO_DIR, repo_url.split("/")[-1][:-4])) except Exception as e: print(f"Error cloning repository {repo_url}: {str(e)}") # Bundle repositories bundle_repositories() if __name__ == "__main__": main()
